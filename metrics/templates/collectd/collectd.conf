{% from 'metrics/map.jinja' import collectd with context %}

FQDNLookup true

LoadPlugin syslog
LoadPlugin battery
LoadPlugin cpu
LoadPlugin df
LoadPlugin disk
LoadPlugin entropy
LoadPlugin interface
LoadPlugin irq
LoadPlugin load
LoadPlugin memory
LoadPlugin network
LoadPlugin processes
LoadPlugin swap
LoadPlugin users
LoadPlugin tcpconns


<Plugin syslog>
    LogLevel info
</Plugin>

Hostname "{{ grains['fqdn'].split('.')|reverse| join('.') }}"

LoadPlugin "write_graphite"
<Plugin "write_graphite">
 <Carbon>
   Host "{{ collectd.carbon }}"
   Port "2003"
{%- if collectd.prefix %}
   Prefix "{{ collectd.prefix }}"
{%- else %}
   Prefix "metrics."
   EscapeCharacter "."
{%- endif %}
   #Postfix ""
   Protocol "tcp"
   SeparateInstances true
   StoreRates true
   AlwaysAppendDS false
 </Carbon>
</Plugin>


LoadPlugin statsd
<Plugin statsd>
  #Host "::"
  Port "8125"
  DeleteSets     true
  TimerPercentile 90.0
</Plugin>


Include "/etc/collectd/filters.conf"
Include "/etc/collectd/thresholds.conf"


