{% set grafana = salt['grains.filter_by']({
    'Debian': {
        'revision': 'v1.5.3',
        'elasticsearchUrl': '//"+window.location.hostname.replace(/^grafana/,"elasticsearch")+(window.location.port ? ":" + window.location.port : "")+"',
        'graphiteUrl': '//"+window.location.hostname.replace(/^grafana/,"graphite")+(window.location.port ? ":" + window.location.port : "")+"',
    },
    'default': 'Debian',
}, merge=salt['pillar.get']('grafana', {})) %}

{% set graphite = salt['grains.filter_by']({
    'Debian': {
        'secret_key': 'updateme'
    },
    'default': 'Debian',
}, merge=salt['pillar.get']('graphite',{})) %}


{% set collectd = salt['grains.filter_by']({
    'Ubuntu-12.04': {
        'carbon': 'monitoring.local',
        'revision': '5.4.0-ppa1~precise1'
    },
    'Ubuntu-14.04': {
        'carbon': 'monitoring.local',
        'revision': ''
    },
    'default': 'Ubuntu-12.04',
}, grain='osfinger', merge=salt['pillar.get']('collectd',{})) %}


{% set beaver = salt['grains.filter_by']({
    'Debian': {
        'redis': {
            'host': 'localhost',
            'port': 6379,
            'db': 0,
        }
    },
    'default': 'Debian',
}, merge=salt['pillar.get']('beaver',{})) %}



